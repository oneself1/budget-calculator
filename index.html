<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Budget</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Top Status Bar -->
    <div class="status-bar">
        <div class="status-time" id="current-time">--:--</div>
        <div class="status-date" id="current-date">--.--.----</div>
    </div>

    <!-- Main App Container -->
    <div class="app-container">
        
        <!-- –≠–ö–†–ê–ù 1: –û–ë–ó–û–† (–ì–ª–∞–≤–Ω–∞—è) -->
        <div class="screen active" id="overview-screen">
            <header class="app-header">
                <h1 class="app-title">Budget</h1>
                <div class="header-actions">
                    <button class="icon-btn settings-btn" onclick="showSettingsModal()">‚öôÔ∏è</button>
                </div>
            </header>

            <!-- –ö–∞—Ä—Ç–∞ –±–∞–ª–∞–Ω—Å–∞ -->
            <section class="balance-card">
                <div class="balance-amount" id="balance-amount">‚ÇΩ0</div>
                <div class="balance-label">–û–±—â–∏–π –±–∞–ª–∞–Ω—Å</div>
            </section>

            <!-- –î–æ—Ö–æ–¥—ã —Å –∫—Ä—É–∂–∫–∞–º–∏ -->
            <section class="circles-section">
                <h2 class="section-title">–î–æ—Ö–æ–¥—ã</h2>
                <div class="circles-container" id="income-circles">
                    <div class="empty-state">–ù–∞–∂–º–∏ + —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å</div>
                </div>
                <div class="income-buttons">
                    <button class="add-circle-btn" onclick="addNewIncomeCategory()">
                        <span class="plus-icon">+</span>
                    </button>
                    <button class="add-income-operation-btn" onclick="addIncomeOperation()">
                        <span class="plus-icon">üí∞</span>
                    </button>
                </div>
            </section>

            <!-- –î–æ–ª–≥–∏ —Å –∫—Ä—É–∂–∫–∞–º–∏ -->
            <section class="circles-section">
                <h2 class="section-title">–î–æ–ª–≥–∏</h2>
                <div class="circles-container" id="debt-circles">
                    <div class="empty-state">–ù–∞–∂–º–∏ + —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å</div>
                </div>
                <button class="add-circle-btn" onclick="addNewCircle('debt')">
                    <span class="plus-icon">+</span>
                </button>
            </section>

            <!-- –†–∞—Å—Ö–æ–¥—ã —Å –∫—Ä—É–∂–∫–∞–º–∏ -->
            <section class="circles-section">
                <h2 class="section-title">–†–∞—Å—Ö–æ–¥—ã</h2>
                <div class="circles-container" id="expense-circles">
                    <div class="empty-state">–ù–∞–∂–º–∏ + —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å</div>
                </div>
                <button class="add-circle-btn" onclick="addNewExpenseCategory()">
                    <span class="plus-icon">+</span>
                </button>
            </section>

            <!-- –ö–Ω–æ–ø–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π -->
            <div class="operation-buttons">
                <button class="add-income-btn" onclick="addIncomeOperation()">–î–æ–±–∞–≤–∏—Ç—å –¥–æ—Ö–æ–¥</button>
                <button class="add-expense-btn" onclick="showCategorySelection()">–î–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—Ö–æ–¥</button>
            </div>
        </div>

        <!-- –≠–ö–†–ê–ù 2: –û–ü–ï–†–ê–¶–ò–ò -->
        <div class="screen" id="operations-screen">
            <header class="app-header">
                <h1 class="app-title">–û–ø–µ—Ä–∞—Ü–∏–∏</h1>
            </header>

            <div class="operations-list" id="operations-list">
                <div class="empty-state">–ù–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏–π</div>
            </div>
        </div>

        <!-- –≠–ö–†–ê–ù 3: –û–¢–ß–ï–¢ -->
        <div class="screen" id="report-screen">
            <header class="app-header">
                <h1 class="app-title">–û—Ç—á–µ—Ç</h1>
            </header>

            <div class="report-section">
                <h2 class="section-title">–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –æ—Ç—á–µ—Ç</h2>
                <div class="report-summary">
                    <div class="report-item">
                        <div class="report-value income" id="report-income">‚ÇΩ0</div>
                        <div class="report-label">–î–æ—Ö–æ–¥—ã</div>
                    </div>
                    <div class="report-item">
                        <div class="report-value expense" id="report-expense">‚ÇΩ0</div>
                        <div class="report-label">–†–∞—Å—Ö–æ–¥—ã</div>
                    </div>
                    <div class="report-item">
                        <div class="report-value debt" id="report-debt">‚ÇΩ0</div>
                        <div class="report-label">–û–ø–ª–∞—á–µ–Ω–Ω—ã–µ –¥–æ–ª–≥–∏</div>
                    </div>
                    <div class="report-item">
                        <div class="report-value balance" id="report-balance">‚ÇΩ0</div>
                        <div class="report-label">–ë–∞–ª–∞–Ω—Å</div>
                    </div>
                </div>

                <div class="results-card">
                    <h3>–î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è</h3>
                    <div id="report-details"></div>
                </div>
            </div>
        </div>

    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ –¥–ª—è —Ä–∞—Å—Ö–æ–¥–æ–≤ -->
    <div class="category-modal" id="category-modal">
        <div class="category-modal-content">
            <h2 class="category-modal-title">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</h2>
            <div class="category-list" id="category-list"></div>
            <div class="modal-actions">
                <button class="modal-btn cancel" onclick="hideCategorySelection()">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <div class="category-modal" id="subcategory-modal">
        <div class="category-modal-content">
            <h2 class="category-modal-title" id="subcategory-modal-title">–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—é</h2>
            <div class="category-list" id="subcategory-list"></div>
            <div class="modal-actions">
                <button class="modal-btn cancel" onclick="hideSubcategorySelection()">–ù–∞–∑–∞–¥</button>
            </div>
        </div>
    </div>

    <div class="category-modal" id="edit-category-modal">
        <div class="category-modal-content">
            <h2 class="category-modal-title" id="edit-category-title">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é</h2>
            <div class="form-group">
                <label for="edit-category-name">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:</label>
                <input type="text" id="edit-category-name" class="modal-input">
            </div>
            <div class="form-group">
                <label for="edit-category-icon">–ò–∫–æ–Ω–∫–∞:</label>
                <input type="text" id="edit-category-icon" class="modal-input" maxlength="2">
            </div>
            <div class="form-group">
                <label>–ü–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏:</label>
                <div class="subcategories-list" id="subcategories-list"></div>
                <button class="modal-btn" onclick="addNewSubcategory()" style="margin-top: 10px;">+ –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—é</button>
            </div>
            <div class="modal-actions">
                <button class="modal-btn cancel" onclick="hideEditCategoryModal()">–û—Ç–º–µ–Ω–∞</button>
                <button class="modal-btn confirm" onclick="saveCategoryChanges()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <div class="category-modal" id="edit-subcategory-modal">
        <div class="category-modal-content">
            <h2 class="category-modal-title" id="edit-subcategory-title">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—é</h2>
            <div class="form-group">
                <label for="edit-subcategory-name">–ù–∞–∑–≤–∞–Ω–∏–µ –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏:</label>
                <input type="text" id="edit-subcategory-name" class="modal-input">
            </div>
            <div class="form-group">
                <label for="edit-subcategory-icon">–ò–∫–æ–Ω–∫–∞:</label>
                <input type="text" id="edit-subcategory-icon" class="modal-input" maxlength="2">
            </div>
            <div class="modal-actions">
                <button class="modal-btn cancel" onclick="hideEditSubcategoryModal()">–û—Ç–º–µ–Ω–∞</button>
                <button class="modal-btn confirm" onclick="saveSubcategoryChanges()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ –¥–ª—è –¥–æ—Ö–æ–¥–æ–≤ -->
    <div class="category-modal" id="income-category-modal">
        <div class="category-modal-content">
            <h2 class="category-modal-title">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é –¥–æ—Ö–æ–¥–∞</h2>
            <div class="category-list" id="income-category-list"></div>
            <div class="modal-actions">
                <button class="modal-btn cancel" onclick="hideIncomeCategorySelection()">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <div class="category-modal" id="income-subcategory-modal">
        <div class="category-modal-content">
            <h2 class="category-modal-title" id="income-subcategory-modal-title">–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—é –¥–æ—Ö–æ–¥–∞</h2>
            <div class="category-list" id="income-subcategory-list"></div>
            <div class="modal-actions">
                <button class="modal-btn cancel" onclick="hideIncomeSubcategorySelection()">–ù–∞–∑–∞–¥</button>
            </div>
        </div>
    </div>

    <div class="category-modal" id="edit-income-category-modal">
        <div class="category-modal-content">
            <h2 class="category-modal-title" id="edit-income-category-title">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é –¥–æ—Ö–æ–¥–æ–≤</h2>
            <div class="form-group">
                <label for="edit-income-category-name">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:</label>
                <input type="text" id="edit-income-category-name" class="modal-input">
            </div>
            <div class="form-group">
                <label for="edit-income-category-icon">–ò–∫–æ–Ω–∫–∞:</label>
                <input type="text" id="edit-income-category-icon" class="modal-input" maxlength="2">
            </div>
            <div class="form-group">
                <label>–ü–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏:</label>
                <div class="subcategories-list" id="income-subcategories-list"></div>
                <button class="modal-btn" onclick="addNewIncomeSubcategory()" style="margin-top: 10px;">+ –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—é</button>
            </div>
            <div class="modal-actions">
                <button class="modal-btn cancel" onclick="hideEditIncomeCategoryModal()">–û—Ç–º–µ–Ω–∞</button>
                <button class="modal-btn confirm" onclick="saveIncomeCategoryChanges()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <div class="category-modal" id="edit-income-subcategory-modal">
        <div class="category-modal-content">
            <h2 class="category-modal-title" id="edit-income-subcategory-title">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—é –¥–æ—Ö–æ–¥–æ–≤</h2>
            <div class="form-group">
                <label for="edit-income-subcategory-name">–ù–∞–∑–≤–∞–Ω–∏–µ –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏:</label>
                <input type="text" id="edit-income-subcategory-name" class="modal-input">
            </div>
            <div class="form-group">
                <label for="edit-income-subcategory-icon">–ò–∫–æ–Ω–∫–∞:</label>
                <input type="text" id="edit-income-subcategory-icon" class="modal-input" maxlength="2">
            </div>
            <div class="modal-actions">
                <button class="modal-btn cancel" onclick="hideEditIncomeSubcategoryModal()">–û—Ç–º–µ–Ω–∞</button>
                <button class="modal-btn confirm" onclick="saveIncomeSubcategoryChanges()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- –§–ò–ö–°–ò–†–û–í–ê–ù–ù–ê–Ø –Ω–∏–∂–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è -->
    <nav class="bottom-nav">
        <div class="nav-item active" onclick="switchScreen('overview')">
            <div class="nav-icon">üí∞</div>
            <div class="nav-label">–ë—é–¥–∂–µ—Ç</div>
        </div>
        <div class="nav-item" onclick="switchScreen('operations')">
            <div class="nav-icon">üìù</div>
            <div class="nav-label">–û–ø–µ—Ä–∞—Ü–∏–∏</div>
        </div>
        <div class="nav-item" onclick="switchScreen('report')">
            <div class="nav-icon">üìä</div>
            <div class="nav-label">–û—Ç—á–µ—Ç</div>
        </div>
    </nav>

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º —Å–µ—Ä–≤–∏—Å—ã -->
    <script src="services/StorageService.js"></script>
    <script src="services/StructuredIncomesService.js"></script>
    <script src="services/DebtsService.js"></script>
    <script src="services/ExpensesService.js"></script>
    <script src="services/OperationsService.js"></script>
    <script src="services/ReportService.js"></script>
    
    <!-- –ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ -->
    <script src="app.js"></script>
    
    <!-- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ -->
    <script src="main.js"></script>
</body>
</html>