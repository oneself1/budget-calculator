<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Budget Pro</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Top Status Bar -->
    <div class="status-bar">
        <div class="status-time" id="current-time">--:--</div>
        <div class="status-date" id="current-date">--.--.----</div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Main App Container -->
    <div class="app-container">
        
        <!-- –≠–ö–†–ê–ù 1: –û–ë–ó–û–† (–ì–ª–∞–≤–Ω–∞—è) -->
        <div class="screen active" id="overview-screen">
            <header class="app-header">
                <h1 class="app-title">Budget Pro</h1>
                <div class="header-actions">
                    <button class="icon-btn settings-btn" onclick="showSettingsModal()">‚öôÔ∏è</button>
                    <button class="icon-btn recurring-btn" onclick="showRecurringTransactionsModal()">üîÑ</button>
                </div>
            </header>

            <!-- –ö–∞—Ä—Ç–∞ –±–∞–ª–∞–Ω—Å–∞ -->
            <section class="balance-card">
                <div class="balance-amount" id="balance-amount">‚ÇΩ0</div>
                <div class="balance-label">–û–±—â–∏–π –±–∞–ª–∞–Ω—Å</div>
                <div class="balance-stats">
                    <span class="stat-income">–î–æ—Ö–æ–¥—ã: ‚ÇΩ0</span>
                    <span class="stat-expense">–†–∞—Å—Ö–æ–¥—ã: ‚ÇΩ0</span>
                </div>
            </section>

            <!-- –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è -->
            <section class="quick-actions">
                <button class="quick-action-btn" onclick="addIncomeOperation()">
                    <span class="quick-action-icon">üí∞</span>
                    <span class="quick-action-label">–î–æ—Ö–æ–¥</span>
                </button>
                <button class="quick-action-btn" onclick="showCategorySelection()">
                    <span class="quick-action-icon">üõí</span>
                    <span class="quick-action-label">–†–∞—Å—Ö–æ–¥</span>
                </button>
                <button class="quick-action-btn" onclick="addNewCircle('debt')">
                    <span class="quick-action-icon">üí≥</span>
                    <span class="quick-action-label">–î–æ–ª–≥</span>
                </button>
                <button class="quick-action-btn" onclick="showAddGoalModal()">
                    <span class="quick-action-icon">üéØ</span>
                    <span class="quick-action-label">–¶–µ–ª—å</span>
                </button>
            </section>

            <!-- –¶–µ–ª–∏ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–π -->
            <section class="savings-section">
                <h2 class="section-title">
                    –¶–µ–ª–∏ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–π
                    <button class="section-action-btn" onclick="showAddGoalModal()">+</button>
                </h2>
                <div class="savings-goals" id="savings-goals">
                    <div class="empty-state">
                        <div style="font-size: 48px; margin-bottom: 10px;">üéØ</div>
                        <div>–ù–µ—Ç —Ü–µ–ª–µ–π –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–π</div>
                        <div style="font-size: 12px; margin-top: 10px; color: #8E8E93;">
                            –î–æ–±–∞–≤—å—Ç–µ —Ü–µ–ª—å —á—Ç–æ–±—ã –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å
                        </div>
                    </div>
                </div>
            </section>

            <!-- –î–æ—Ö–æ–¥—ã —Å –∫—Ä—É–∂–∫–∞–º–∏ -->
            <section class="circles-section">
                <h2 class="section-title">–î–æ—Ö–æ–¥—ã</h2>
                <div class="circles-container" id="income-circles">
                    <div class="empty-state">–ù–∞–∂–º–∏ + —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å</div>
                </div>
                <div class="income-buttons">
                    <button class="add-circle-btn" onclick="addNewIncomeCategory()">
                        <span class="plus-icon">+</span>
                    </button>
                    <button class="add-income-operation-btn" onclick="addIncomeOperation()">
                        <span class="plus-icon">üí∞</span>
                    </button>
                </div>
            </section>

            <!-- –î–æ–ª–≥–∏ —Å –∫—Ä—É–∂–∫–∞–º–∏ -->
            <section class="circles-section">
                <h2 class="section-title">–î–æ–ª–≥–∏</h2>
                <div class="circles-container" id="debt-circles">
                    <div class="empty-state">–ù–∞–∂–º–∏ + —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å</div>
                </div>
                <button class="add-circle-btn" onclick="addNewCircle('debt')">
                    <span class="plus-icon">+</span>
                </button>
            </section>

            <!-- –†–∞—Å—Ö–æ–¥—ã —Å –∫—Ä—É–∂–∫–∞–º–∏ -->
            <section class="circles-section">
                <h2 class="section-title">–†–∞—Å—Ö–æ–¥—ã</h2>
                <div class="circles-container" id="expense-circles">
                    <div class="empty-state">–ù–∞–∂–º–∏ + —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å</div>
                </div>
                <div class="expense-buttons">
                    <button class="add-circle-btn" onclick="addNewExpenseCategory()">
                        <span class="plus-icon">+</span>
                    </button>
                    <button class="add-expense-operation-btn" onclick="showCategorySelection()">
                        <span class="plus-icon">üõí</span>
                    </button>
                </div>
            </section>
        </div>

        <!-- –≠–ö–†–ê–ù 2: –û–ü–ï–†–ê–¶–ò–ò -->
        <div class="screen" id="operations-screen">
            <header class="app-header">
                <h1 class="app-title">–û–ø–µ—Ä–∞—Ü–∏–∏</h1>
                <div class="header-actions">
                    <button class="icon-btn filter-btn" onclick="showOperationsFilter()">üîç</button>
                </div>
            </header>

            <div class="virtual-scroll-container">
                <div class="operations-list" id="operations-list">
                    <div class="empty-state">
                        <div style="font-size: 48px; margin-bottom: 10px;">üìù</div>
                        <div>–ù–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏–π</div>
                        <div style="font-size: 12px; margin-top: 10px; color: #8E8E93;">
                            –î–æ–±–∞–≤—å—Ç–µ –¥–æ—Ö–æ–¥—ã, —Ä–∞—Å—Ö–æ–¥—ã –∏–ª–∏ –¥–æ–ª–≥–∏ —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –∏—Ö –∑–¥–µ—Å—å
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –≠–ö–†–ê–ù 3: –û–¢–ß–ï–¢ -->
        <div class="screen" id="report-screen">
            <header class="app-header">
                <h1 class="app-title">–û—Ç—á–µ—Ç</h1>
            </header>

            <div class="report-section">
                <h2 class="section-title">–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –æ—Ç—á–µ—Ç</h2>
                <div class="report-summary">
                    <div class="report-item">
                        <div class="report-value income" id="report-income">‚ÇΩ0</div>
                        <div class="report-label">–î–æ—Ö–æ–¥—ã</div>
                    </div>
                    <div class="report-item">
                        <div class="report-value expense" id="report-expense">‚ÇΩ0</div>
                        <div class="report-label">–†–∞—Å—Ö–æ–¥—ã</div>
                    </div>
                    <div class="report-item">
                        <div class="report-value debt" id="report-debt">‚ÇΩ0</div>
                        <div class="report-label">–û–ø–ª–∞—á–µ–Ω–Ω—ã–µ –¥–æ–ª–≥–∏</div>
                    </div>
                    <div class="report-item">
                        <div class="report-value balance" id="report-balance">‚ÇΩ0</div>
                        <div class="report-label">–ë–∞–ª–∞–Ω—Å</div>
                    </div>
                </div>

                <div class="results-card">
                    <h3>–î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è</h3>
                    <div id="report-details"></div>
                </div>
            </div>
        </div>

        <!-- –≠–ö–†–ê–ù 4: –¶–ï–õ–ò -->
        <div class="screen" id="goals-screen">
            <header class="app-header">
                <h1 class="app-title">–¶–µ–ª–∏</h1>
                <div class="header-actions">
                    <button class="icon-btn" onclick="showAddGoalModal()">+</button>
                </div>
            </header>

            <div class="virtual-scroll-container">
                <div class="goals-container" id="goals-container">
                    <!-- Goals will be loaded here -->
                </div>
            </div>
        </div>

    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
    <div class="category-modal" id="add-goal-modal">
        <div class="category-modal-content">
            <h2 class="category-modal-title">–ù–æ–≤–∞—è —Ü–µ–ª—å –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è</h2>
            <div class="form-group">
                <label for="goal-name">–ù–∞–∑–≤–∞–Ω–∏–µ —Ü–µ–ª–∏:</label>
                <input type="text" id="goal-name" class="modal-input" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ù–æ–≤—ã–π —Ç–µ–ª–µ—Ñ–æ–Ω">
            </div>
            <div class="form-group">
                <label for="goal-target">–¶–µ–ª–µ–≤–∞—è —Å—É–º–º–∞:</label>
                <input type="number" id="goal-target" class="modal-input" placeholder="10000" min="1" step="0.01">
            </div>
            <div class="form-group">
                <label for="goal-icon">–ò–∫–æ–Ω–∫–∞:</label>
                <input type="text" id="goal-icon" class="modal-input" value="üéØ" maxlength="2">
            </div>
            <div class="modal-actions">
                <button class="modal-btn cancel" onclick="hideAddGoalModal()">–û—Ç–º–µ–Ω–∞</button>
                <button class="modal-btn confirm" onclick="createNewGoal()">–°–æ–∑–¥–∞—Ç—å —Ü–µ–ª—å</button>
            </div>
        </div>
    </div>

    <div class="category-modal" id="settings-modal">
        <div class="category-modal-content">
            <h2 class="category-modal-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
            
            <div class="settings-group">
                <h3>–û—Å–Ω–æ–≤–Ω—ã–µ</h3>
                <div class="setting-item">
                    <label class="setting-label">
                        <input type="checkbox" id="setting-budget-alerts" checked>
                        –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –±—é–¥–∂–µ—Ç–µ
                    </label>
                </div>
                <div class="setting-item">
                    <label class="setting-label">
                        <input type="checkbox" id="setting-auto-recurring" checked>
                        –ê–≤—Ç–æ-—Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –æ–ø–µ—Ä–∞—Ü–∏–π
                    </label>
                </div>
            </div>

            <div class="settings-group">
                <h3>–í–∞–ª—é—Ç–∞</h3>
                <div class="setting-item">
                    <select id="currency-select" class="modal-input">
                        <option value="‚ÇΩ">–†—É–±–ª—å (‚ÇΩ)</option>
                        <option value="$">–î–æ–ª–ª–∞—Ä ($)</option>
                        <option value="‚Ç¨">–ï–≤—Ä–æ (‚Ç¨)</option>
                        <option value="¬•">–Æ–∞–Ω—å (¬•)</option>
                    </select>
                </div>
            </div>

            <div class="settings-group">
                <h3>–û–ø–∞—Å–Ω–∞—è –∑–æ–Ω–∞</h3>
                <div class="setting-item">
                    <button class="modal-btn warning" onclick="exportData()">–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</button>
                </div>
                <div class="setting-item">
                    <button class="modal-btn danger" onclick="clearAllData()">–û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ</button>
                </div>
            </div>

            <div class="modal-actions">
                <button class="modal-btn cancel" onclick="hideSettingsModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
                <button class="modal-btn confirm" onclick="saveSettings()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <div class="category-modal" id="recurring-transactions-modal">
        <div class="category-modal-content">
            <h2 class="category-modal-title">–ü–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –æ–ø–µ—Ä–∞—Ü–∏–∏</h2>
            <div class="recurring-transactions-list" id="recurring-transactions-list">
                <div class="empty-state">–ù–µ—Ç –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –æ–ø–µ—Ä–∞—Ü–∏–π</div>
            </div>
            <div class="modal-actions">
                <button class="modal-btn" onclick="showAddRecurringTransactionModal()">+ –î–æ–±–∞–≤–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é</button>
                <button class="modal-btn cancel" onclick="hideRecurringTransactionsModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>

    <div class="category-modal" id="add-recurring-modal">
        <div class="category-modal-content">
            <h2 class="category-modal-title">–ù–æ–≤–∞—è –ø–æ–≤—Ç–æ—Ä—è—é—â–∞—è—Å—è –æ–ø–µ—Ä–∞—Ü–∏—è</h2>
            <div class="form-group">
                <label for="recurring-type">–¢–∏–ø –æ–ø–µ—Ä–∞—Ü–∏–∏:</label>
                <select id="recurring-type" class="modal-input">
                    <option value="expense">–†–∞—Å—Ö–æ–¥</option>
                    <option value="income">–î–æ—Ö–æ–¥</option>
                </select>
            </div>
            <div class="form-group">
                <label for="recurring-amount">–°—É–º–º–∞:</label>
                <input type="number" id="recurring-amount" class="modal-input" placeholder="0" min="0" step="0.01">
            </div>
            <div class="form-group">
                <label for="recurring-description">–û–ø–∏—Å–∞–Ω–∏–µ:</label>
                <input type="text" id="recurring-description" class="modal-input" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏">
            </div>
            <div class="form-group">
                <label for="recurring-recurrence">–ü–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ:</label>
                <select id="recurring-recurrence" class="modal-input">
                    <option value="daily">–ï–∂–µ–¥–Ω–µ–≤–Ω–æ</option>
                    <option value="weekly">–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ</option>
                    <option value="monthly" selected>–ï–∂–µ–º–µ—Å—è—á–Ω–æ</option>
                    <option value="yearly">–ï–∂–µ–≥–æ–¥–Ω–æ</option>
                </select>
            </div>
            <div class="modal-actions">
                <button class="modal-btn cancel" onclick="hideAddRecurringModal()">–û—Ç–º–µ–Ω–∞</button>
                <button class="modal-btn confirm" onclick="createRecurringTransaction()">–°–æ–∑–¥–∞—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- –§–ò–ö–°–ò–†–û–í–ê–ù–ù–ê–Ø –Ω–∏–∂–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è -->
    <nav class="bottom-nav">
        <div class="nav-item active" onclick="switchScreen('overview')">
            <div class="nav-icon">üè†</div>
            <div class="nav-label">–ì–ª–∞–≤–Ω–∞—è</div>
        </div>
        <div class="nav-item" onclick="switchScreen('operations')">
            <div class="nav-icon">üìù</div>
            <div class="nav-label">–û–ø–µ—Ä–∞—Ü–∏–∏</div>
        </div>
        <div class="nav-item" onclick="switchScreen('goals')">
            <div class="nav-icon">üéØ</div>
            <div class="nav-label">–¶–µ–ª–∏</div>
        </div>
        <div class="nav-item" onclick="switchScreen('report')">
            <div class="nav-icon">üìä</div>
            <div class="nav-label">–û—Ç—á–µ—Ç</div>
        </div>
    </nav>

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º —Å–µ—Ä–≤–∏—Å—ã -->
    <script src="services/IndexedDBService.js"></script>
    <script src="services/ToastService.js"></script>
    
    <!-- –ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ -->
    <script src="BudgetApp.js"></script>
    
    <!-- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ -->
    <script src="main.js"></script>
</body>
</html>
