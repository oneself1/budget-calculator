<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢—Ä–µ–∫–µ—Ä —Ä–∞—Å—Ö–æ–¥–æ–≤ —Å –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üí∞ –¢—Ä–µ–∫–µ—Ä —Ä–∞—Å—Ö–æ–¥–æ–≤</h1>
            <div class="total-expenses" id="totalExpenses">0 ‚ÇΩ</div>
            <p>–û–±—â–∞—è —Å—É–º–º–∞ —Ä–∞—Å—Ö–æ–¥–æ–≤</p>
        </div>

        <div class="main-content">
            <div class="categories-section">
                <h2 class="section-title">üìä –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ä–∞—Å—Ö–æ–¥–æ–≤</h2>
                <div id="categoriesList"></div>
            </div>

            <div class="expenses-section">
                <h2 class="section-title">üìù –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥—ã</h2>
                <div id="expensesList"></div>
            </div>
        </div>

        <div class="controls">
            <button class="btn-primary" onclick="openAddExpenseModal()">‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—Ö–æ–¥</button>
            <button class="btn-success" onclick="openAddCategoryModal()">üìÅ –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é</button>
            <button class="btn-secondary" onclick="openStatistics()">üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ä–∞—Å—Ö–æ–¥–∞ -->
    <div id="addExpenseModal" class="modal">
        <div class="modal-content">
            <h2>üí∏ –î–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—Ö–æ–¥</h2>
            
            <!-- –®–∞–≥ 1: –í—ã–±–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
            <div id="expenseStep1">
                <div class="form-group">
                    <label>–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é:</label>
                    <div id="categoryOptions"></div>
                </div>
            </div>

            <!-- –®–∞–≥ 2: –í—ã–±–æ—Ä –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å) -->
            <div id="expenseStep2" style="display: none;">
                <button class="back-button" onclick="backToCategorySelection()">‚Üê –ù–∞–∑–∞–¥ –∫ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º</button>
                <div class="form-group">
                    <label id="subcategoryLabel">–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—é:</label>
                    <div id="subcategoryOptions"></div>
                </div>
            </div>

            <!-- –®–∞–≥ 3: –í–≤–æ–¥ —Å—É–º–º—ã –∏ –æ–ø–∏—Å–∞–Ω–∏—è -->
            <div id="expenseStep3" style="display: none;">
                <button class="back-button" onclick="backToSubcategorySelection()">‚Üê –ù–∞–∑–∞–¥ –∫ –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—è–º</button>
                
                <div class="expense-details">
                    <strong>–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</strong>
                    <span id="selectedCategoryDisplay"></span>
                </div>

                <div class="form-group">
                    <label for="expenseAmount">–°—É–º–º–∞ —Ä–∞—Å—Ö–æ–¥–∞ (‚ÇΩ):</label>
                    <input type="number" id="expenseAmount" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É" min="1">
                </div>

                <div class="form-group">
                    <label for="expenseDescription">–û–ø–∏—Å–∞–Ω–∏–µ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):</label>
                    <input type="text" id="expenseDescription" placeholder="–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–∞">
                </div>

                <div class="modal-buttons">
                    <button class="btn-secondary" onclick="closeAddExpenseModal()">–û—Ç–º–µ–Ω–∞</button>
                    <button class="btn-success" onclick="addExpense()">–î–æ–±–∞–≤–∏—Ç—å</button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
    <div id="categoryModal" class="modal">
        <div class="modal-content">
            <h2 id="categoryModalTitle">üìÅ –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é</h2>
            
            <div class="form-group">
                <label for="categoryName">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:</label>
                <input type="text" id="categoryName" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ï–¥–∞">
            </div>

            <div class="form-group">
                <label for="categoryEmoji">–°–º–∞–π–ª–∏–∫:</label>
                <input type="text" id="categoryEmoji" placeholder="üçï" maxlength="2">
            </div>

            <div class="form-group">
                <label>–ü–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏:</label>
                <div class="subcategories-list" id="subcategoriesList">
                    <!-- –°–ø–∏—Å–æ–∫ –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–π –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
                </div>
                <button class="btn-primary" onclick="openAddSubcategoryModal()" style="width: auto; min-width: auto;">+ –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—é</button>
            </div>

            <div class="modal-buttons">
                <button class="btn-secondary" onclick="closeCategoryModal()">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn-success" onclick="saveCategory()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ -->
    <div id="subcategoryModal" class="modal">
        <div class="modal-content">
            <h2 id="subcategoryModalTitle">üìù –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—é</h2>
            
            <div class="form-group">
                <label for="subcategoryName">–ù–∞–∑–≤–∞–Ω–∏–µ –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏:</label>
                <input type="text" id="subcategoryName" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –°—É–ø–µ—Ä–º–∞—Ä–∫–µ—Ç">
            </div>

            <div class="form-group">
                <label for="subcategoryEmoji">–°–º–∞–π–ª–∏–∫:</label>
                <input type="text" id="subcategoryEmoji" placeholder="üõí" maxlength="2">
            </div>

            <div class="modal-buttons">
                <button class="btn-secondary" onclick="closeSubcategoryModal()">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn-success" onclick="saveSubcategory()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ -->
    <div id="statisticsModal" class="modal">
        <div class="modal-content">
            <h2>üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–∞—Å—Ö–æ–¥–æ–≤</h2>
            
            <div class="form-group">
                <label for="statPeriod">–ü–µ—Ä–∏–æ–¥:</label>
                <select id="statPeriod" onchange="updateStatistics()">
                    <option value="week">–ù–µ–¥–µ–ª—è</option>
                    <option value="month" selected>–ú–µ—Å—è—Ü</option>
                    <option value="year">–ì–æ–¥</option>
                    <option value="all">–í—Å–µ –≤—Ä–µ–º—è</option>
                </select>
            </div>

            <div class="statistics-content">
                <div id="statisticsData"></div>
            </div>

            <div class="modal-buttons">
                <button class="btn-secondary" onclick="closeStatistics()">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>